<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tidy chemometrics • tidySpectR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tidy chemometrics">
<meta property="og:description" content="The aim of this package is to provide tidy methods for the 
    analysis of spectral dataset in order to improve 
    accessibility and reproducibility of chemometric analysis.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tidySpectR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CVUA-RRW/tidySpectR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="tidyspectr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#tidyspectr" class="anchor"></a>tidySpectR</h1></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The aim of this package is to provide tidy methods for the analysis of spectral dataset in order to improve accessibility and reproducibility of chemometric analysis. No more ‘Analysis was performed using a collection of undocumented MATLAB scripts available upon request’.</p>
<p>This package is meant to fill the gap between data acquisition and preprocessing (phasing, baseline correction) and modelling with the tidymodels metapackage.</p>
<p>This package provides an S3 class <code>collection</code> storing spectra informations and methods to process the data. It also includes <code>step_</code> methods specific to chemometrics to use with the <a href="https://github.com/tidymodels/recipes">tidymodels recipe package</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CVUA-RRW/tidySpectR">tidySpectR</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">fa_nmr</span><span class="op">)</span>

<span class="co"># H1-NMR data of egg yolk fatty acids</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">fa_nmr</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Spectra collection containing 10 entries.</span>
<span class="co">#&gt; Number of bins: 47500</span>
<span class="co">#&gt; Normalized: FALSE</span>
<span class="co">#&gt; Bucketted: FALSE</span>
<span class="co">#&gt; Labels: control treatment</span>

<span class="va">processed</span> <span class="op">&lt;-</span> <span class="va">fa_nmr</span> <span class="op">%&gt;%</span> 
             <span class="co"># Trimming edges</span>
             <span class="fu"><a href="reference/extract.html">extract</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.5</span>, to <span class="op">=</span> <span class="fl">7.2</span><span class="op">)</span> <span class="op">%&gt;%</span> 
             <span class="co"># Masking water peak</span>
             <span class="fu"><a href="reference/mask.html">mask</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4.58</span>, to <span class="op">=</span> <span class="fl">4.68</span><span class="op">)</span> <span class="op">%&gt;%</span> 
             <span class="co"># Masking MeOD peak</span>
             <span class="fu"><a href="reference/mask.html">mask</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">3.33</span>, to <span class="op">=</span> <span class="fl">3.38</span><span class="op">)</span> <span class="op">%&gt;%</span> 
             <span class="co"># Bucketting with a bucket size of 0.04 ppm</span>
             <span class="fu"><a href="reference/bucket_uniform.html">bucket_uniform</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.04</span><span class="op">)</span> <span class="op">%&gt;%</span> 
             <span class="co"># Normalizing with the intensity of the methylen group of phospahtidylcholin</span>
             <span class="fu"><a href="reference/normalize_internalStandard.html">normalize_internalStandard</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">3.58</span>, to <span class="op">=</span> <span class="fl">3.64</span><span class="op">)</span> <span class="op">%&gt;%</span>
             <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html">tidy</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">processed</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span> 
<span class="co">#&gt; </span>
<span class="co">#&gt; # A tibble: 10 x 5</span>
<span class="co">#&gt; # Groups:   id [10]</span>
<span class="co">#&gt;    id          label     `0.519600000000001` `0.559600000000001` `0.5996`</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;                   &lt;dbl&gt;               &lt;dbl&gt;    &lt;dbl&gt;</span>
<span class="co">#&gt;  1 20198124123 control                0.0173              0.0270   0.0236</span>
<span class="co">#&gt;  2 20198124124 control                0.0186              0.0271   0.0253</span>
<span class="co">#&gt;  3 20198124125 control                0.0138              0.0218   0.0191</span>
<span class="co">#&gt;  4 20198124469 control                0.0176              0.0269   0.0244</span>
<span class="co">#&gt;  5 20198124538 control                0.0161              0.0246   0.0219</span>
<span class="co">#&gt;  6 20198124540 treatment              0.0159              0.0238   0.0219</span>
<span class="co">#&gt;  7 20198124553 treatment              0.0152              0.0233   0.0209</span>
<span class="co">#&gt;  8 20198124554 treatment              0.0154              0.0249   0.0217</span>
<span class="co">#&gt;  9 20198124555 treatment              0.0177              0.0263   0.0240</span>
<span class="co">#&gt; 10 20198125029 treatment              0.0171              0.0251   0.0232</span>

<span class="co"># Pre-processing for data analysis using the `recipe` package</span>
<span class="va">nmr_preprocessing</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">processed</span>, <span class="va">label</span> <span class="op">~</span><span class="va">.</span><span class="op">)</span> <span class="op">%&gt;%</span>
                     <span class="fu">update_role</span><span class="op">(</span><span class="va">id</span>, new_role <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
                     <span class="co"># Pareto-VAST scaling</span>
                     <span class="fu"><a href="reference/tidy.step_svast.html">step_vast</a></span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span>, scaling <span class="op">=</span> <span class="st">'pareto'</span><span class="op">)</span> <span class="op">%&gt;%</span>
                     <span class="co"># PCA transformation</span>
                     <span class="fu">step_pca</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span>, num_comp <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>

<span class="co"># Check the data </span>
<span class="va">nmr_preprocessing</span> <span class="op">%&gt;%</span> <span class="fu">prep</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">juice</span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; # A tibble: 10 x 7</span>
<span class="co">#&gt;    id          label        PC1    PC2     PC3     PC4    PC5</span>
<span class="co">#&gt;    &lt;fct&gt;       &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt;  1 20198124123 control    -9.02  -6.24 -22.3    11.7   -5.69</span>
<span class="co">#&gt;  2 20198124124 control   -57.6   46.9    8.19    6.24  -2.53</span>
<span class="co">#&gt;  3 20198124125 control    60.2  -41.6    1.55   10.2    0.529</span>
<span class="co">#&gt;  4 20198124469 control   -73.9  -32.4   -2.93    0.531 10.1</span>
<span class="co">#&gt;  5 20198124538 control     4.72 -28.7    8.96   -7.51  -2.76</span>
<span class="co">#&gt;  6 20198124540 treatment  -3.25  -5.80  21.4     6.83  -5.20</span>
<span class="co">#&gt;  7 20198124553 treatment  60.9   33.3    2.02   -7.28   6.52</span>
<span class="co">#&gt;  8 20198124554 treatment  26.2   32.2   -5.78   10.4    4.21</span>
<span class="co">#&gt;  9 20198124555 treatment  -6.60  -2.26   0.285 -14.1    0.927</span>
<span class="co">#&gt; 10 20198125029 treatment  -1.59   4.62 -11.5   -17.0   -6.08</span></code></pre></div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>This package is not yet on CRAN, install from github:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">install_github</span><span class="op">(</span><span class="st">"CVUA-RRW/tidySpectR"</span><span class="op">)</span></code></pre></div>
</div>
<div id="contributions" class="section level2">
<h2 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h2>
<p>Contributions are very welcome! If you would like to see new functionnalities submit an issue directly on github or start a PR.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/CVUA-RRW/tidySpectR/">https://​github.com/​CVUA-RRW/​tidySpectR/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/CVUA-RRW/tidySpectR/issues">https://​github.com/​CVUA-RRW/​tidySpectR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/BSD-3-Clause">BSD_3_clause</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Gregoire Denay <br><small class="roles"> Author, maintainer, copyright holder </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Gregoire Denay.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
